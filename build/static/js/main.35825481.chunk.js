(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{11:function(e,t,n){"use strict";n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return a})),n.d(t,"g",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return j})),n.d(t,"d",(function(){return b})),n.d(t,"j",(function(){return d}));var r=n(5),c=Object(r.b)("contacts/fetchRequest"),a=Object(r.b)("contacts/fetchSuccess"),i=Object(r.b)("contacts/fetchError"),s=Object(r.b)("contacts/addRequest"),o=Object(r.b)("contacts/addSuccess"),u=Object(r.b)("contacts/addError"),l=Object(r.b)("contacts/deleteRequest"),j=Object(r.b)("contacts/deleteSuccess"),b=Object(r.b)("contacts/deleteError"),d=Object(r.b)("contacts/filterContacts")},112:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n.n(c),i=n(20),s=n.n(i),o=(n(65),n(6)),u=n(12),l=n(30),j=n(38),b=n(4),d=n(5),f=n(19),O=Object(d.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,error:null,isFetchingUser:!1},extraReducers:(r={},Object(b.a)(r,f.d.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(b.a)(r,f.b.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(b.a)(r,f.c.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(b.a)(r,f.a.pending,(function(e,t){e.isFetchingUser=!0})),Object(b.a)(r,f.a.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isFetchingUser=!1})),Object(b.a)(r,f.a.rejected,(function(e,t){e.isFetchingUser=!1})),r)}).reducer,h={isLoggedIn:function(e){return e.auth.isLoggedIn},getUserName:function(e){return e.auth.user.name},getUserToken:function(e){return e.auth.token},isFetchingUser:function(e){return e.auth.isFetchingUser}},g=n(9),p=n(2),v=["children","redirectTo"];function m(e){var t=e.children,n=e.redirectTo,r=void 0===n?g.a.homePage:n,c=Object(j.a)(e,v),a=Object(u.c)(h.isLoggedIn);return Object(p.jsx)(o.b,Object(l.a)(Object(l.a)({},c),{},{children:a?t:Object(p.jsx)(o.a,{to:r})}))}var x=n(42),_=n(18),y=n(28),k=n.n(y);function w(){var e=Object(u.c)(h.isLoggedIn);return Object(p.jsx)("nav",{className:k.a.nav_container,children:Object(p.jsxs)("ul",{className:k.a.navigation,children:[Object(p.jsx)("li",{className:k.a.list_item,children:Object(p.jsx)(_.c,{to:g.a.homePage,exact:!0,activeClassName:k.a.active,children:"Main"})}),e&&Object(p.jsx)("li",{className:k.a.list_item,children:Object(p.jsx)(_.c,{to:g.a.privateContacts,exact:!0,activeClassName:k.a.active,children:"Contacts"})})]})})}var N=n(127),C=n(39),L=n.n(C);function U(){var e=Object(u.b)(),t=Object(u.c)(h.getUserName),n=Object(c.useCallback)((function(){e(Object(f.c)())}),[e]);return Object(p.jsxs)("div",{className:L.a.menu_container,children:[Object(p.jsxs)("span",{className:L.a.menu_text,children:["You are welcome, ",Object(p.jsx)("span",{className:L.a.user_name,children:"".concat(t)}),"!"]}),Object(p.jsx)(N.a,{type:"button",onClick:n,color:"primary",variant:"contained",size:"small",children:"Logout"})]})}var I=n(29),F=n.n(I);function T(){return Object(p.jsx)("div",{className:F.a.nav_container,children:Object(p.jsxs)("ul",{className:F.a.navigation,children:[Object(p.jsx)("li",{className:F.a.list_item,children:Object(p.jsx)(_.c,{to:g.a.registration,activeClassName:F.a.active,children:"Registration"})}),Object(p.jsx)("li",{className:F.a.list_item,children:Object(p.jsx)(_.c,{to:g.a.login,activeClassName:F.a.active,children:"Login"})})]})})}var R=n(55),z=n.n(R);function P(){var e=Object(u.c)(h.isLoggedIn);return Object(p.jsxs)("header",{className:z.a.header,children:[Object(p.jsx)(w,{}),e?Object(p.jsx)(U,{}):Object(p.jsx)(T,{})]})}var S=n(56),W=n.n(S);function E(e){var t=e.children;return Object(p.jsx)("div",{className:W.a.container,children:t})}var V=["children","restricted","redirectTo"];function A(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,c=e.redirectTo,a=void 0===c?g.a.homePage:c,i=Object(j.a)(e,V),s=Object(u.c)(h.isLoggedIn);return Object(p.jsx)(o.b,Object(l.a)(Object(l.a)({},i),{},{children:s&&r?Object(p.jsx)(o.a,{to:a}):t}))}var q=n(27),M=(n(109),Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,145))}))),Y=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,146))})),B=Object(c.lazy)((function(){return n.e(6).then(n.bind(null,147))})),H=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,144))}));function J(){var e=Object(u.b)();return Object(c.useEffect)((function(){e(Object(f.a)())}),[e]),Object(u.c)(h.isFetchingUser)?Object(p.jsx)(x.a,{}):Object(p.jsxs)(E,{children:[Object(p.jsx)(P,{}),Object(p.jsx)(o.d,{children:Object(p.jsxs)(c.Suspense,{fallback:Object(p.jsx)(x.a,{}),children:[Object(p.jsx)(A,{exact:!0,path:g.a.homePage,children:Object(p.jsx)(B,{})}),Object(p.jsx)(A,{exact:!0,path:g.a.registration,redirectTo:g.a.privateContacts,restricted:!0,children:Object(p.jsx)(Y,{})}),Object(p.jsx)(A,{exact:!0,path:g.a.login,redirectTo:g.a.privateContacts,restricted:!0,children:Object(p.jsx)(M,{})}),Object(p.jsx)(m,{path:g.a.privateContacts,redirectTo:g.a.login,children:Object(p.jsx)(H,{})})]})}),Object(p.jsx)(q.a,{})]})}var Q,D,K,G=n(57),X=n(37),Z=n(23),$=n(58),ee=n.n($),te=n(13),ne=n(11),re=Object(d.d)([],(Q={},Object(b.a)(Q,ne.i,(function(e,t){return t.payload})),Object(b.a)(Q,ne.c,(function(e,t){var n=t.payload;return[].concat(Object(X.a)(e),[n])})),Object(b.a)(Q,ne.f,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),Q)),ce=Object(d.d)("",Object(b.a)({},ne.j,(function(e,t){return t.payload.toLowerCase()}))),ae=Object(d.d)(null,(D={},Object(b.a)(D,ne.a,(function(e,t){return window.alert(t.payload)})),Object(b.a)(D,ne.b,(function(){return null})),Object(b.a)(D,ne.d,(function(e,t){return t.payload})),Object(b.a)(D,ne.e,(function(){return null})),D)),ie=Object(d.d)(!1,(K={},Object(b.a)(K,ne.h,(function(){return!0})),Object(b.a)(K,ne.i,(function(){return!1})),Object(b.a)(K,ne.g,(function(){return!1})),Object(b.a)(K,ne.b,(function(){return!0})),Object(b.a)(K,ne.c,(function(){return!1})),Object(b.a)(K,ne.a,(function(){return!1})),Object(b.a)(K,ne.e,(function(){return!0})),Object(b.a)(K,ne.f,(function(){return!1})),Object(b.a)(K,ne.d,(function(){return!1})),K)),se=Object(te.b)({items:re,filter:ce,error:ae,loading:ie}),oe=Object(X.a)(Object(d.f)({serializableCheck:{ignoredActions:[Z.a,Z.f,Z.b,Z.c,Z.d,Z.e]}})),ue={key:"auth",storage:ee.a,whitelist:["token"]},le=Object(d.a)({reducer:{contacts:se,auth:Object(Z.g)(ue,O)},middleware:oe,devTools:!1}),je=Object(Z.h)(le);s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(u.a,{store:le,children:Object(p.jsx)(G.a,{loading:null,persistor:je,children:Object(p.jsx)(_.a,{children:Object(p.jsx)(J,{})})})})}),document.getElementById("root"))},19:function(e,t,n){"use strict";n.d(t,"d",(function(){return b})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return O}));var r=n(22),c=n.n(r),a=n(31),i=n(24),s=n.n(i),o=n(5),u=n(27);s.a.defaults.baseURL="https://connections-api.herokuapp.com/";var l=function(e){s.a.defaults.headers.common.Authorization=e},j=function(){s.a.defaults.headers.common.Authorization=""},b=Object(o.c)("auth/registration",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/users/signup",t);case 3:return r=e.sent,a=r.data,l(a.token),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),u.b.error("Unfortunately, something go wrong!"),e.abrupt("return",n.rejectWithValue(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()),d=Object(o.c)("auth/login",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,a=t.password,e.prev=1,e.next=4,s.a.post("/users/login",{email:r,password:a});case 4:return i=e.sent,o=i.data,l(o.token),e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(1),u.b.error("Unfortunately, something go wrong!"),e.abrupt("return",n.rejectWithValue(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),f=Object(o.c)("auth/logout",function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/users/logout");case 3:j(),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),u.b.error("Unfortunately, something go wrong!"),e.abrupt("return",n.rejectWithValue(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()),O=Object(o.c)("auth/refresh",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return e.prev=4,l(a),e.next=8,s.a.get("/users/current");case 8:return i=e.sent,o=i.data,e.abrupt("return",o);case 13:return e.prev=13,e.t0=e.catch(4),u.b.error("Unfortunately, something go wrong, try again!"),e.abrupt("return",n.rejectWithValue());case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,n){return e.apply(this,arguments)}}())},28:function(e,t,n){e.exports={active:"styles_active__3P_9a",navigation:"styles_navigation__29oW5",list_item:"styles_list_item__15M8a"}},29:function(e,t,n){e.exports={active:"styles_active__voAHf",navigation:"styles_navigation__2kQ9K",list_item:"styles_list_item__3wlRb"}},39:function(e,t,n){e.exports={menu_text:"styles_menu_text__vamwp",user_name:"styles_user_name__S-wYF",menu_container:"styles_menu_container__1snlT"}},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(0);var r=n(53),c=n.n(r),a=(n(108),n(54)),i=n.n(a),s=n(2);function o(){return Object(s.jsx)("div",{className:i.a.overlay,children:Object(s.jsx)(c.a,{type:"Circles",color:"#00BFFF",height:80,width:80})})}},54:function(e,t,n){e.exports={overlay:"styles_overlay__pDtuY"}},55:function(e,t,n){e.exports={header:"styles_header__1QRCm"}},56:function(e,t,n){e.exports={container:"styles_container__2HRgC"}},65:function(e,t,n){},9:function(e,t,n){"use strict";t.a={homePage:"/",login:"/login",registration:"/register",privateContacts:"/contacts"}}},[[112,2,3]]]);
//# sourceMappingURL=main.35825481.chunk.js.map