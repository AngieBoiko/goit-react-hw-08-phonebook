{"version":3,"sources":["redux/Contacts/actions.js","redux/Auth/authslice.js","redux/Auth/authSelectors.js","components/PrivateRoute/PrivateRoute.jsx","components/Navigation/Navigation.jsx","components/UserMenu/UserMenu.jsx","components/AuthNav/AuthNav.jsx","components/AppBar/AppBar.jsx","components/Container/Container.jsx","components/PublicRoute/PublicRoute.jsx","App.js","redux/Contacts/reducers.js","redux/store.js","index.js","redux/Auth/usersAPI.js","components/Navigation/styles.module.css","components/AuthNav/styles.module.css","components/UserMenu/styles.module.css","components/Loader/Loader.jsx","components/Loader/styles.module.css","components/AppBar/styles.module.css","components/Container/styles.module.css","utils/routes.js"],"names":["fetchContactsRequest","createAction","fetchContactsSuccess","fetchContactsError","addContactRequest","addContactSuccess","addContactError","deleteContactRequest","deleteContactSuccess","deleteContactError","filterContacts","authSlice","createSlice","name","initialState","user","email","token","isLoggedIn","error","isFetchingUser","extraReducers","register","fulfilled","state","action","payload","logIn","logOut","_","fetchCurrentUser","pending","rejected","authSelectors","auth","getUserName","getUserToken","PrivateRoute","children","redirectTo","routes","homePage","props","useSelector","to","Navigation","className","styles","nav_container","navigation","list_item","exact","activeClassName","active","privateContacts","UserMenu","dispatch","useDispatch","onLogoutClick","useCallback","menu_container","menu_text","user_name","Button","type","onClick","color","variant","size","AuthNav","registration","login","AppBar","header","Container","container","PublicRoute","restricted","LogIn","lazy","Registration","HomePage","PrivateContactsView","App","useEffect","fallback","path","items","createReducer","filter","id","toLowerCase","window","alert","loading","combineReducers","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","contacts","contactsReducer","persistReducer","authReducer","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","document","getElementById","axios","defaults","baseURL","headers","common","createAsyncThunk","credentials","thunkAPI","a","post","data","toast","rejectWithValue","password","getState","persistedToken","get","module","exports","Spinner","overlay","height","width"],"mappings":"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","file":"static/js/main.35825481.chunk.js","sourcesContent":["import { createAction } from '@reduxjs/toolkit';\r\n\r\nexport const fetchContactsRequest = createAction('contacts/fetchRequest');\r\nexport const fetchContactsSuccess = createAction('contacts/fetchSuccess');\r\nexport const fetchContactsError = createAction('contacts/fetchError');\r\n\r\nexport const addContactRequest = createAction('contacts/addRequest');\r\nexport const addContactSuccess = createAction('contacts/addSuccess');\r\nexport const addContactError = createAction('contacts/addError');\r\n\r\nexport const deleteContactRequest = createAction('contacts/deleteRequest');\r\nexport const deleteContactSuccess = createAction('contacts/deleteSuccess');\r\nexport const deleteContactError = createAction('contacts/deleteError');\r\n\r\nexport const filterContacts = createAction('contacts/filterContacts');\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport { register, logIn, logOut, fetchCurrentUser } from 'redux/Auth/usersAPI';\r\n\r\nconst initialState = {\r\n  user: {\r\n    name: null,\r\n    email: null,\r\n  },\r\n  token: null,\r\n  isLoggedIn: false,\r\n  error: null,\r\n  isFetchingUser: false,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  extraReducers: {\r\n    [register.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [logIn.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [logOut.fulfilled](state, _) {\r\n      state.user = { name: null, email: null };\r\n      state.token = null;\r\n      state.isLoggedIn = false;\r\n    },\r\n    [fetchCurrentUser.pending](state, _) {\r\n      state.isFetchingUser = true;\r\n    },\r\n    [fetchCurrentUser.fulfilled](state, action) {\r\n      state.user = action.payload;\r\n      state.isLoggedIn = true;\r\n      state.isFetchingUser = false;\r\n    },\r\n    [fetchCurrentUser.rejected](state, _) {\r\n      state.isFetchingUser = false;\r\n    },\r\n  },\r\n});\r\nexport default authSlice.reducer;\r\n","const isLoggedIn = state => state.auth.isLoggedIn;\r\nconst getUserName = state => state.auth.user.name;\r\nconst getUserToken = state => state.auth.token;\r\nconst isFetchingUser = state => state.auth.isFetchingUser;\r\n\r\nconst authSelectors = {\r\n  isLoggedIn,\r\n  getUserName,\r\n  getUserToken,\r\n  isFetchingUser,\r\n};\r\nexport default authSelectors;\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport authSelectors from 'redux/Auth';\r\nimport routes from 'utils/routes';\r\n\r\nexport default function PrivateRoute({\r\n  children,\r\n  redirectTo = routes.homePage,\r\n  ...props\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.isLoggedIn);\r\n  return (\r\n    <Route {...props}>\r\n      {isLoggedIn ? children : <Redirect to={redirectTo} />}\r\n    </Route>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport routes from 'utils/routes';\r\nimport { useSelector } from 'react-redux';\r\nimport authSelectors from 'redux/Auth/authSelectors';\r\nimport styles from './styles.module.css';\r\n\r\nexport default function Navigation() {\r\n  const isLoggedIn = useSelector(authSelectors.isLoggedIn);\r\n  return (\r\n    <nav className={styles.nav_container}>\r\n      <ul className={styles.navigation}>\r\n        <li className={styles.list_item}>\r\n          <NavLink to={routes.homePage} exact activeClassName={styles.active}>\r\n            Main\r\n          </NavLink>\r\n        </li>\r\n\r\n        {isLoggedIn && (\r\n          <li className={styles.list_item}>\r\n            <NavLink\r\n              to={routes.privateContacts}\r\n              exact\r\n              activeClassName={styles.active}\r\n            >\r\n              Contacts\r\n            </NavLink>\r\n          </li>\r\n        )}\r\n      </ul>\r\n    </nav>\r\n  );\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { logOut } from 'redux/Auth/usersAPI';\r\nimport authSelectors from 'redux/Auth';\r\nimport Button from '@material-ui/core/Button';\r\nimport styles from './styles.module.css';\r\n\r\nexport default function UserMenu() {\r\n  const dispatch = useDispatch();\r\n  const name = useSelector(authSelectors.getUserName);\r\n  const onLogoutClick = useCallback(() => {\r\n    dispatch(logOut());\r\n  }, [dispatch]);\r\n  return (\r\n    <div className={styles.menu_container}>\r\n      <span className={styles.menu_text}>\r\n        You are welcome, <span className={styles.user_name}>{`${name}`}</span>!\r\n      </span>\r\n      <Button\r\n        type=\"button\"\r\n        onClick={onLogoutClick}\r\n        color=\"primary\"\r\n        variant=\"contained\"\r\n        size=\"small\"\r\n      >\r\n        Logout\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport routes from 'utils/routes';\r\nimport styles from './styles.module.css';\r\n\r\nexport default function AuthNav() {\r\n  return (\r\n    <div className={styles.nav_container}>\r\n      <ul className={styles.navigation}>\r\n        <li className={styles.list_item}>\r\n          <NavLink to={routes.registration} activeClassName={styles.active}>\r\n            Registration\r\n          </NavLink>\r\n        </li>\r\n        <li className={styles.list_item}>\r\n          <NavLink to={routes.login} activeClassName={styles.active}>\r\n            Login\r\n          </NavLink>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport authSelectors from 'redux/Auth';\r\nimport Navigation from 'components/Navigation';\r\nimport UserMenu from 'components/UserMenu';\r\nimport AuthNav from 'components/AuthNav';\r\nimport styles from './styles.module.css';\r\n\r\nexport default function AppBar() {\r\n  const isLoggedIn = useSelector(authSelectors.isLoggedIn);\r\n  return (\r\n    <header className={styles.header}>\r\n      <Navigation />\r\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n    </header>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport styles from './styles.module.css';\r\n\r\nexport default function Container({ children }) {\r\n  return <div className={styles.container}>{children}</div>;\r\n}\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport authSelectors from 'redux/Auth';\r\nimport routes from 'utils/routes';\r\nimport { useSelector } from 'react-redux';\r\n\r\nexport default function PublicRoute({\r\n  children,\r\n  restricted = false,\r\n  redirectTo = routes.homePage,\r\n  ...props\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.isLoggedIn);\r\n  return (\r\n    <Route {...props}>\r\n      {isLoggedIn && restricted ? <Redirect to={redirectTo} /> : children}\r\n    </Route>\r\n  );\r\n}\r\n","import React, { useEffect, lazy, Suspense } from 'react';\r\nimport { Switch } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport PrivateRoute from 'components/PrivateRoute';\r\nimport Spinner from 'components/Loader';\r\nimport AppBar from 'components/AppBar';\r\nimport Container from 'components/Container';\r\nimport PublicRoute from 'components/PublicRoute';\r\nimport routes from 'utils/routes';\r\nimport { fetchCurrentUser } from 'redux/Auth/usersAPI';\r\nimport authSelectors from 'redux/Auth/authSelectors';\r\n\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nconst LogIn = lazy(() => import('components/LogIn'));\r\nconst Registration = lazy(() => import('components/Registration'));\r\nconst HomePage = lazy(() => import('components/HomePage'));\r\nconst PrivateContactsView = lazy(() =>\r\n  import('components/PrivateContactsView'),\r\n);\r\n\r\nexport default function App() {\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    dispatch(fetchCurrentUser());\r\n  }, [dispatch]);\r\n  const isFetchingUser = useSelector(authSelectors.isFetchingUser);\r\n\r\n  return isFetchingUser ? (\r\n    <Spinner />\r\n  ) : (\r\n    <Container>\r\n      <AppBar />\r\n      <Switch>\r\n        <Suspense fallback={<Spinner />}>\r\n          <PublicRoute exact path={routes.homePage}>\r\n            <HomePage />\r\n          </PublicRoute>\r\n          <PublicRoute\r\n            exact\r\n            path={routes.registration}\r\n            redirectTo={routes.privateContacts}\r\n            restricted\r\n          >\r\n            <Registration />\r\n          </PublicRoute>\r\n          <PublicRoute\r\n            exact\r\n            path={routes.login}\r\n            redirectTo={routes.privateContacts}\r\n            restricted\r\n          >\r\n            <LogIn />\r\n          </PublicRoute>\r\n          <PrivateRoute path={routes.privateContacts} redirectTo={routes.login}>\r\n            <PrivateContactsView />\r\n          </PrivateRoute>\r\n        </Suspense>\r\n      </Switch>\r\n      <ToastContainer />\r\n    </Container>\r\n  );\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport { createReducer } from '@reduxjs/toolkit';\r\nimport {\r\n  addContactRequest,\r\n  addContactSuccess,\r\n  addContactError,\r\n  deleteContactRequest,\r\n  deleteContactSuccess,\r\n  deleteContactError,\r\n  filterContacts,\r\n  fetchContactsRequest,\r\n  fetchContactsSuccess,\r\n  fetchContactsError,\r\n} from './actions';\r\n\r\nconst items = createReducer([], {\r\n  [fetchContactsSuccess]: (_, { payload }) => {\r\n    return payload;\r\n  },\r\n  [addContactSuccess]: (state, { payload }) => {\r\n    return [...state, payload];\r\n  },\r\n  [deleteContactSuccess]: (state, { payload }) => {\r\n    return state.filter(({ id }) => id !== payload);\r\n  },\r\n});\r\n\r\nconst filter = createReducer('', {\r\n  [filterContacts]: (_, { payload }) => {\r\n    return payload.toLowerCase();\r\n  },\r\n});\r\n\r\nconst error = createReducer(null, {\r\n  [addContactError]: (_, action) => window.alert(action.payload),\r\n  [addContactRequest]: () => null,\r\n  [deleteContactError]: (_, action) => action.payload,\r\n  [deleteContactRequest]: () => null,\r\n});\r\n\r\nconst loading = createReducer(false, {\r\n  [fetchContactsRequest]: () => true,\r\n  [fetchContactsSuccess]: () => false,\r\n  [fetchContactsError]: () => false,\r\n  [addContactRequest]: () => true,\r\n  [addContactSuccess]: () => false,\r\n  [addContactError]: () => false,\r\n  [deleteContactRequest]: () => true,\r\n  [deleteContactSuccess]: () => false,\r\n  [deleteContactError]: () => false,\r\n});\r\nexport default combineReducers({\r\n  items,\r\n  filter,\r\n  error,\r\n  loading,\r\n});\r\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\r\nimport {\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n  persistStore,\r\n  persistReducer,\r\n} from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\nimport contactsReducer from './Contacts/reducers';\r\nimport { authReducer } from './Auth';\r\n\r\nconst middleware = [\r\n  ...getDefaultMiddleware({\r\n    serializableCheck: {\r\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n    },\r\n  }),\r\n];\r\nconst authPersistConfig = {\r\n  key: 'auth',\r\n  storage,\r\n  whitelist: ['token'],\r\n};\r\nexport const store = configureStore({\r\n  reducer: {\r\n    contacts: contactsReducer,\r\n    auth: persistReducer(authPersistConfig, authReducer),\r\n  },\r\n  middleware,\r\n  devTools: process.env.NODE_ENV === 'development',\r\n});\r\nexport const persistor = persistStore(store);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\nimport { store, persistor } from './redux/store';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <PersistGate loading={null} persistor={persistor}>\r\n        <BrowserRouter>\r\n          <App />\r\n        </BrowserRouter>\r\n      </PersistGate>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n","import axios from 'axios';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { toast } from 'react-toastify';\r\n\r\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com/';\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common['Authorization'] = token;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common['Authorization'] = '';\r\n  },\r\n};\r\nexport const register = createAsyncThunk(\r\n  'auth/registration',\r\n  async (credentials, thunkAPI) => {\r\n    try {\r\n      const { data } = await axios.post('/users/signup', credentials);\r\n      token.set(data.token);\r\n      return data;\r\n    } catch (error) {\r\n      toast.error('Unfortunately, something go wrong!');\r\n      return thunkAPI.rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const logIn = createAsyncThunk(\r\n  'auth/login',\r\n  async ({ email, password }, thunkAPI) => {\r\n    try {\r\n      const { data } = await axios.post('/users/login', { email, password });\r\n      token.set(data.token);\r\n      return data;\r\n    } catch (error) {\r\n      toast.error('Unfortunately, something go wrong!');\r\n      return thunkAPI.rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const logOut = createAsyncThunk('auth/logout', async (_, thunkAPI) => {\r\n  try {\r\n    await axios.post(`/users/logout`);\r\n    token.unset();\r\n  } catch (error) {\r\n    toast.error('Unfortunately, something go wrong!');\r\n    return thunkAPI.rejectWithValue(error);\r\n  }\r\n});\r\n\r\nexport const fetchCurrentUser = createAsyncThunk(\r\n  'auth/refresh',\r\n  async (_, thunkAPI) => {\r\n    const state = thunkAPI.getState();\r\n    const persistedToken = state.auth.token;\r\n    if (persistedToken === null) {\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n    try {\r\n      token.set(persistedToken);\r\n      const { data } = await axios.get('/users/current');\r\n      return data;\r\n    } catch (error) {\r\n      toast.error('Unfortunately, something go wrong, try again!');\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n  },\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"active\":\"styles_active__3P_9a\",\"navigation\":\"styles_navigation__29oW5\",\"list_item\":\"styles_list_item__15M8a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"active\":\"styles_active__voAHf\",\"navigation\":\"styles_navigation__2kQ9K\",\"list_item\":\"styles_list_item__3wlRb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu_text\":\"styles_menu_text__vamwp\",\"user_name\":\"styles_user_name__S-wYF\",\"menu_container\":\"styles_menu_container__1snlT\"};","import React from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport styles from './styles.module.css';\r\n\r\nexport default function Spinner() {\r\n  return (\r\n    <div className={styles.overlay}>\r\n      <Loader type=\"Circles\" color=\"#00BFFF\" height={80} width={80} />\r\n    </div>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"styles_overlay__pDtuY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"styles_header__1QRCm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2HRgC\"};","const routes = {\r\n  homePage: '/',\r\n  login: '/login',\r\n  registration: '/register',\r\n  privateContacts: '/contacts',\r\n};\r\nexport default routes;\r\n"],"sourceRoot":""}